<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <title>Thompson Family Recipes</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css"
    integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link rel="stylesheet" href="./style.css">

  <link rel="stylesheet" type="text/css" href="./css/newMain.css">


  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <style>
    :root {
      --primary: #fff;
      --dark: #004f99;
      --light: #ddd;
      --shadow: 0 1px 5px rgba(104, 104, 104, 0.8);
    }

    .form_bg {
      background-color: #eee;
      color: #666;
      padding: 20px;
      border-radius: 10px;
      position: absolute;
      border: 1px solid #fff;
      margin: auto;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      width: 320px;
      height: 280px;
    }

    .profile {
      background-color: #eee;
      color: #666;
      padding: 20px;
      border-radius: 5px;
      position: absolute;
      border: 1px solid #fff;
      margin: auto;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      width: 320px;
      min-height: 280px;
      height: auto;
      overflow: auto;
    }

    .form_bg_sign {
      background-color: #eee;
      color: #666;
      padding: 20px;
      border-radius: 10px;
      position: absolute;
      border: 1px solid #fff;
      margin: auto;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      width: 320px;
      height: 380px;
    }

    .modal-body {
      border: none;
      background-color: none;
    }

    .modal-content {
      border: none;
      background-color: rgba(255, 0, 0, 0);
    }


    #btnlogin {
      background-color: var(--dark);
      color: var(--primary);
    }

    #back-to-top-btn {
      display: none;
      background-color: var(--dark);
    }

    .align-left {
      text-align: left;
      display: inline;
    }

    .align-right {
      float: right;
    }

    .add {
      display: none;
    }

    #user {
      display: none;
    }

    .card {
      width: 17rem;
      display: inline-block;
      margin: 1% 1% 1% 1%;
      min-height: 380px;
      max-height: 380px;
      overflow: auto;
    }

    .card-img-top {
      width: 100%;
      height: 148px;
    }

    @media (max-width: 700px) {
      .card {
        margin: 2% 0% 2% 13%;
      }

      form {
        padding-left: 5px;
        padding-right: 5px;
      }
    }

    @media (max-width: 500px) {
      .card {
        margin: 2% 0% 2% 13%;
      }

      #searchbar {
        margin: 5px 0px 5px 5px;
      }

      .float {
        bottom: 50px;
      }
    }
  </style>
</head>

<body id="top">
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo03"
      aria-controls="navbarTogglerDemo03" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <a class="navbar-brand" href="#">Thompson Family Recipes</a>

    <div class="collapse navbar-collapse" id="navbarTogglerDemo03">
      <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
        <li class="nav-item active">
          <a class="nav-link" href="./index.html">Home<span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Appetizers</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Breakfast</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Beverages</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Lunch</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Soups</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Salads</a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            Main Dishes
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
            <a class="dropdown-item" href="#">Beef</a>
            <a class="dropdown-item" href="#">Poultry</a>
            <a class="dropdown-item" href="#">Pork</a>
            <a class="dropdown-item" href="#">Seafood</a>
            <a class="dropdown-item" href="#">Vegetarian</a>
          </div>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            Side Dishes
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
            <a class="dropdown-item" href="#">Vegetables</a>
            <a class="dropdown-item" href="#">Rice</a>
          </div>
        </li>
      </ul>

      <button type="button" class="btn btn-primary" value="Log In" id="masterLogIn" data-toggle="modal"
        data-target="#login">
        Log In
      </button>
      <button type="button" class="btn btn-primary" id="user" data-toggle="modal" data-target="#profile"
        data-dismiss="modal"><i class="material-icons" style="vertical-align: text-bottom;">
          person
        </i><span style="vertical-align: text-bottom;">&nbsp;&nbsp;Profile</span></button>

    </div>
  </nav>

  <button id="back-to-top-btn" class="float">
    <i class="fas fa-angle-double-up"></i>
  </button>

  <form class="form-inline">
    <input class="form-control mr-sm-2" id="searchbar" type="search" onkeyup="search_recipe()" placeholder="Search"
      aria-label="Search">
  </form>

  <div class="modal fade" id="login" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="form-group">
          <div class="input-group">
            <div class="form_bg">
              <form>
                <h2 class="text-center">Login</h2>
                <br />
                <div class="form-group">
                  <input type="email" class="form-control" id="email" placeholder="Email">
                </div>
                <div class="form-group">
                  <input type="password" class="form-control" id="password" placeholder="Password">
                </div>
                <br />
                <div class="align-left">
                  <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#signUP"
                    data-dismiss="modal" id="signup">Sign Up</button>
                </div>
                <div class="align-right">
                  <button class="btn btn-default" id="loginb" onclick="login()">Login</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <div class="modal fade" id="signUP" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-body">
          <div class="form-group">
            <div class="input-group">
              <div class="form_bg_sign">
                <form>
                  <h2 class="text-center">Sign Up</h2>
                  <br />
                  <div class="form-group">
                    <input type="email" class="form-control" id="fname" placeholder="First Name">
                  </div>
                  <div class="form-group">
                    <input type="email" class="form-control" id="lname" placeholder="Last Name">
                  </div>
                  <div class="form-group">
                    <input type="email" class="form-control" id="email" placeholder="Email">
                  </div>
                  <div class="form-group">
                    <input type="password" class="form-control" id="password" placeholder="Password">
                  </div>
                  <br />
                  <div class="align-right">
                    <button class="btn btn-default" data-toggle="modal" data-target="#login" data-dismiss="modal"
                      id="loginb">Sign Up</button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="card">
    <img class="card-img-top" src="https://joliveco.com/wp-content/uploads/2016/03/IMG_9809.jpg" alt="Card image cap">
    <div class="card-body">
      <h5 class="card-title">Dill Oyster Crakers</h5>
      <p class="card-text">Shari Thompson Lyons</p>
      <a href="./dill-oyster-crackers.html" class="btn btn-primary">Make It!</a>
      <span class="add"><button class="btn btn-success" onclick="addIt('Dill Oyster Crakers')">Add It!</button></span>
    </div>
  </div>


  <div class="modal fade" tabindex="-1" id="profile">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="form-group">
          <div class="input-group">
            <div class="profile">

              <p>Welcome<span id="username"></span></p>

              <p>Recipe Book</p>
              <ul id="recipeBook"></ul>

            </div>
          </div>
        </div>
      </div>
    </div>





    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/6.2.4/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.2.4/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.2.4/firebase-firestore.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#config-web-app -->

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous">
    </script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous">
    </script>
</body>

<script>
  function search_recipe() {
    let input = document.getElementById('searchbar').value
    input = input.toLowerCase();
    let x = document.getElementsByClassName('card-title');
    let y = document.getElementsByClassName('card');
    let z = document.getElementsByClassName('card-text');

    for (i = 0; i < x.length; i++) {

      if (!x[i].innerHTML.toLowerCase().includes(input)) {
        y[i].style.display = "none";
      } else {
        y[i].style.display = "";
      }
    }
  }

  function login() {
    //console.log("HELOO")
    var userl = document.getElementById('email').value;
    var passl = document.getElementById('password').value;
    var user = 'camthomp96@gmail.com';
    var pass = 'a';
    var username = "Cameron"
    //console.log(userl)
    //console.log(passl)
    if (user === userl && pass === passl) {
      document.getElementById('masterLogIn').style.display = "none";
      document.getElementById('user').style.display = "block";
      var adds = document.getElementsByClassName('add');
      document.getElementById('username').innerHTML = " " + username;

      for (var i = 0; i < adds.length; i++) {
        adds[i].style.display = "inline";
        //console.log("HEY")
      }

    }

  }


  window.onscroll = function () {
    scrollFunction()
  };

  function scrollFunction() {
    if (document.body.scrollTop > 380 || document.documentElement.scrollTop > 380) {
      document.getElementById("topbtn").style.display = "block";
    } else {
      document.getElementById("topbtn").style.display = "none";
    }
  }


  var userRecipes = [];

  function getHTMLlink(recipe) {

    var newRec = recipe.toLowerCase().replace(/\s/g, "-")
    return newRec + ".html"
  }

  function addIt(recipe) {
    // Add the recipe to the recipe array
    userRecipes.push(recipe)

    //Create a new list item
    var listItem = document.createElement("li");

    //Create a new link
    var a = document.createElement("a");

    //Create the text for the link bassed on the recipe
    var textnode = document.createTextNode(recipe);

    //Grab the existing list
    var list = document.getElementById("recipeBook");

    //Create a link based on the recipe
    var htmlLink = getHTMLlink(recipe);

    //Set the href attribute
    a.setAttribute('href', htmlLink);

    //add the text for the link
    a.textContent = textnode.textContent;

    //Add the link to the list item
    listItem.appendChild(a);

    //Add the list item to the list
    list.appendChild(listItem)

  }

  function recCardTemplate(recipe) {

    var card = document.createElement("div");
    card.classList.add("card")

    var img = document.createElement("IMG");
    console.log(recipe);
    img.setAttribute("src", recipe.image);
    img.classList.add("card-img-top");
    img.setAttribute("alt", "The Pulpit Rock");


    var cardBody = document.createElement("div");
    cardBody.classList.add("card-body");

    var cardTitle = document.createElement("h5");
    cardTitle.classList.add("card-title");

    var cardName = document.createTextNode(recipe.title);
    cardTitle.appendChild(cardName);

    var cardAuthor = document.createElement("p");
    cardAuthor.classList.add("card-text");

    var cardAuthorName = document.createTextNode(recipe.author);
    cardAuthor.appendChild(cardAuthorName);

    var makeIt = document.createElement("a");
    makeIt.href = "apple.com";
    makeIt.classList.add("btn");
    makeIt.classList.add("btn-primary");
    var makeItName = document.createTextNode("Make It!");
    makeIt.appendChild(makeItName);

    card.appendChild(img);
    cardBody.appendChild(cardTitle);
    cardBody.appendChild(cardAuthor);
    cardBody.appendChild(makeIt);
    card.appendChild(cardBody);

    document.body.appendChild(card);
  }

  function getRecs() {
    let urls = ["https://cdthomp1.github.io/what-can-I-make/recipes/macaroni-and-cheese-r.json",
      "https://cdthomp1.github.io/what-can-I-make/recipes/baked-garlic-cheddar-chicken-r.json",
      "https://cdthomp1.github.io/what-can-I-make/recipes/cream-cheese-and-chicken-taquitos-r.json",
      "https://cdthomp1.github.io/what-can-I-make/recipes/chicken-ranch-wraps-r.json",
      "https://cdthomp1.github.io/what-can-I-make/recipes/chicken-low-mein-r.json",
      "https://cdthomp1.github.io/what-can-I-make/recipes/chicken-dumpling-r.json",
      "https://cdthomp1.github.io/what-can-I-make/recipes/blackened-chicken-and-avocado-salad-r.json",
      "https://cdthomp1.github.io/what-can-I-make/recipes/crockpot-chili-r.json",
      "https://cdthomp1.github.io/what-can-I-make/recipes/baked-cream-cheese-spaghetti-r.json"
    ];

    urls.forEach(url => {
      var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function () {
        if (this.readyState == 4 && this.status == 200) {
          let recipe = JSON.parse(this.responseText)
          recCardTemplate(recipe)
        }
      };
      xhttp.open("GET", url, true);
      xhttp.send();
    });
  }

  getRecs();






  const backToTopButton = document.querySelector("#back-to-top-btn");

  window.addEventListener("scroll", scrollFunction);

  function scrollFunction() {
    if (window.pageYOffset > 300) { // Show backToTopButton
      if (!backToTopButton.classList.contains("btnEntrance")) {
        backToTopButton.classList.remove("btnExit");
        backToTopButton.classList.add("btnEntrance");
        backToTopButton.style.display = "block";
      }
    } else { // Hide backToTopButton
      if (backToTopButton.classList.contains("btnEntrance")) {
        backToTopButton.classList.remove("btnEntrance");
        backToTopButton.classList.add("btnExit");
        setTimeout(function () {
          backToTopButton.style.display = "none";
        }, 250);
      }
    }
  }
  backToTopButton.addEventListener("click", smoothScrollBackToTop);

  // function backToTop() {
  //   window.scrollTo(0, 0);
  // }

  function smoothScrollBackToTop() {
    const targetPosition = 0;
    const startPosition = window.pageYOffset;
    const distance = targetPosition - startPosition;
    const duration = 750;
    let start = null;

    window.requestAnimationFrame(step);

    function step(timestamp) {
      if (!start) start = timestamp;
      const progress = timestamp - start;
      window.scrollTo(0, easeInOutCubic(progress, startPosition, distance, duration));
      if (progress < duration) window.requestAnimationFrame(step);
    }
  }

  function easeInOutCubic(t, b, c, d) {
    t /= d / 2;
    if (t < 1) return c / 2 * t * t * t + b;
    t -= 2;
    return c / 2 * (t * t * t + 2) + b;
  };
</script>

<script src="main.js"></script>
<script src="index.js"></script>

</html>